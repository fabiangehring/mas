<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 3 Daten | Die Bestimmung optimaler Kauf- und Verkaufspreise von Basiswerten zur Wahrung der täglichen Delta-Neutralität beim Handel von Aktionoptionen mit Hilfe verschiedener Machine Learning Methoden</title>
  <meta name="description" content="Kapitel 3 Daten | Die Bestimmung optimaler Kauf- und Verkaufspreise von Basiswerten zur Wahrung der täglichen Delta-Neutralität beim Handel von Aktionoptionen mit Hilfe verschiedener Machine Learning Methoden" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 3 Daten | Die Bestimmung optimaler Kauf- und Verkaufspreise von Basiswerten zur Wahrung der täglichen Delta-Neutralität beim Handel von Aktionoptionen mit Hilfe verschiedener Machine Learning Methoden" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 3 Daten | Die Bestimmung optimaler Kauf- und Verkaufspreise von Basiswerten zur Wahrung der täglichen Delta-Neutralität beim Handel von Aktionoptionen mit Hilfe verschiedener Machine Learning Methoden" />
  
  
  

<meta name="author" content="Fabian Gehring, Zürcher Hochschule für Angewandte Wissenschaften" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="analyse.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> - </a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Einleitung</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#motivation"><i class="fa fa-check"></i><b>2.1</b> Motivation</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#forschungsfrage"><i class="fa fa-check"></i><b>2.2</b> Forschungsfrage</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#daten"><i class="fa fa-check"></i><b>2.3</b> Daten</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#methoden"><i class="fa fa-check"></i><b>2.4</b> Methoden</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#disclaimer"><i class="fa fa-check"></i><b>2.5</b> Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="daten-1.html"><a href="daten-1.html"><i class="fa fa-check"></i><b>3</b> Daten</a>
<ul>
<li class="chapter" data-level="3.1" data-path="daten-1.html"><a href="daten-1.html#bezug-und-umfang"><i class="fa fa-check"></i><b>3.1</b> Bezug und Umfang</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="daten-1.html"><a href="daten-1.html#aktienuniversum"><i class="fa fa-check"></i><b>3.1.1</b> Aktienuniversum</a></li>
<li class="chapter" data-level="3.1.2" data-path="daten-1.html"><a href="daten-1.html#preisinformationen"><i class="fa fa-check"></i><b>3.1.2</b> Preisinformationen</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="daten-1.html"><a href="daten-1.html#aufbereitung"><i class="fa fa-check"></i><b>3.2</b> Aufbereitung</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="daten-1.html"><a href="daten-1.html#bereinigung"><i class="fa fa-check"></i><b>3.2.1</b> Bereinigung</a></li>
<li class="chapter" data-level="3.2.2" data-path="daten-1.html"><a href="daten-1.html#normalisierung"><i class="fa fa-check"></i><b>3.2.2</b> Normalisierung</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analyse.html"><a href="analyse.html"><i class="fa fa-check"></i><b>4</b> Analyse</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Die Bestimmung optimaler Kauf- und Verkaufspreise von Basiswerten zur Wahrung der täglichen Delta-Neutralität beim Handel von Aktionoptionen mit Hilfe verschiedener Machine Learning Methoden</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="daten-1" class="section level1" number="3">
<h1><span class="header-section-number">Kapitel 3</span> Daten</h1>
<div id="bezug-und-umfang" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Bezug und Umfang</h2>
<div id="aktienuniversum" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Aktienuniversum</h3>
<p>Für die vorliegende Analyse werden die Aktienpreise grosser Unternehmen weltweit herangezogen. Konkret werden alle Aktienkomponenten des “iShares MSCI World UCITS ETF” <span class="citation">(vgl. Blackrock <a href="#ref-blackrock" role="doc-biblioref">2020</a>)</span> per 28. Februar 2020<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> verwendet. Dieser Exchange Traded Fund (ETF) besteht zu diesem Zeitpunkt aus 1639 Aktien, welche sich automatisiert auslesen lassen. Ferner stellt die Webseite des ETF Emittenten weitere Attribute zur Verfügung. Diese lauten am Beispiel Nesté wie folgt:</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:etf-data-nestle-stock">Tabelle 3.1: </span>Attribute der Nestlé Aktie per 28. Februar 2020
</caption>
<thead>
<tr>
<th style="text-align:left;">
Attribut
</th>
<th style="text-align:left;">
Wert
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Ticker
</td>
<td style="text-align:left;">
NESN
</td>
</tr>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
NESTLE SA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asset Class
</td>
<td style="text-align:left;">
Equity
</td>
</tr>
<tr>
<td style="text-align:left;">
Weight (%)
</td>
<td style="text-align:left;">
0.74265
</td>
</tr>
<tr>
<td style="text-align:left;">
Price
</td>
<td style="text-align:left;">
104.76
</td>
</tr>
<tr>
<td style="text-align:left;">
Shares
</td>
<td style="text-align:left;">
361433
</td>
</tr>
<tr>
<td style="text-align:left;">
Market Value
</td>
<td style="text-align:left;">
37862437
</td>
</tr>
<tr>
<td style="text-align:left;">
Notional Value
</td>
<td style="text-align:left;">
37862437
</td>
</tr>
<tr>
<td style="text-align:left;">
Sector
</td>
<td style="text-align:left;">
Consumer Staples
</td>
</tr>
<tr>
<td style="text-align:left;">
ISIN
</td>
<td style="text-align:left;">
CH0038863350
</td>
</tr>
<tr>
<td style="text-align:left;">
Exchange
</td>
<td style="text-align:left;">
Six Swiss Exchange Ag
</td>
</tr>
<tr>
<td style="text-align:left;">
Location
</td>
<td style="text-align:left;">
Switzerland
</td>
</tr>
<tr>
<td style="text-align:left;">
Market Currency
</td>
<td style="text-align:left;">
CHF
</td>
</tr>
</tbody>
</table>
<p>Neben eindeutigen Identifiern wie “Ticker” und “ISIN” enthält der Datensatz auch Informationen zur “Asset Class” der Komponente. Für die vorliegende Analyse von Aktien ist hierbei lediglich die Ausprägung “Equity” zulässig. Die Kennzahlen “Weight”, “Market Value” und “Notional Value” geben Auskunft über die Grösse der betachteten Unternehmung und eignen sich auch zum Vergleich ebendieser. Zu beachten gilt, dass im Falle von Aktien der “Notional Value” dem “Market Value” entspricht und sich dieser bis auf rundungsbedingte Differenzen auch aus der Anzahl ausgegebener Titel mal Tagesendkurs (“Shares” x “Price”) ermitteln lässt.</p>
<p>Als weitere Unterscheidungsmerkmale sind der Hauptbörsenplatz “Exchange” (27 unterschiedliche Ausprägungen), der Sitz “Location” (23 Ausprägungen) sowie die Währung “Market Currency” (14 Ausprägungen) aufgeführt. Alle drei Attribute bilden stark verwandte Informationen ab. Geschlüsselt auf Kontinente ergeben sich für den Börsensitz folgende Anteile:</p>
<ul>
<li>Nordamerika: 44%</li>
<li>Europa: 28%</li>
<li>Asien: 23%</li>
<li>Australien: 5%</li>
</ul>
<p>Als letzes Attribut enthält der Datensatz Angaben zum “Sector” in welchem die jeweilige Unternehmung tätigt ist. Bis auf die Kategorien “Energy” und “Other” ist jeder der 12 aufgeführten Sektoren mit mindestens 5 Anteil vorhanden. Die beiden Sektoren mit dem höchsten Anteil sind “Industrials” und “Financials”.</p>
<div class="figure"><span id="fig:analysis-etf-data"></span>
<img src="Masterarbeit_files/figure-html/analysis-etf-data-1.png" alt="Anzahl im Datensatz vorhandene Titel je Sektor" width="672" />
<p class="caption">
Abbildung 3.1: Anzahl im Datensatz vorhandene Titel je Sektor
</p>
</div>
</div>
<div id="preisinformationen" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Preisinformationen</h3>
<p>Für alle Titel werden in einem zweiten Schritt die historischen Aktienkurse inkl. Höchst- und Tiefstkurs bezogen. Diese Daten stehen via Yahoo Finance auf täglicher Basis zur freien Nutzung zur Verfügung <span class="citation">(vgl. Yahoo <a href="#ref-yahoo_finance" role="doc-biblioref">2020</a>)</span>. Zu beachten gilt es hierbei, dass die Yahoo Ticker für ausserhalb der USA gehandelte Titel einen Suffix je Börsenplatz verwenden. Für die Analyse kommen so 9’212’052 tägliche Datenwerte für 1’636 Titel zusammen. Für 3 Aktien können keine Werte gefunden werden. Tabelle <a href="daten-1.html#tab:quote-data-nestle">3.2</a> zeigt einen Beispieleintrag für die Aktie von Nesté per 14. Februar 2019.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:quote-data-nestle">Tabelle 3.2: </span>Kursinformationen der Nesté Aktie per 12. April 2019
</caption>
<thead>
<tr>
<th style="text-align:left;">
Attribut
</th>
<th style="text-align:left;">
Wert
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Ticker
</td>
<td style="text-align:left;">
NESN.SW
</td>
</tr>
<tr>
<td style="text-align:left;">
Date
</td>
<td style="text-align:left;">
2019-04-12
</td>
</tr>
<tr>
<td style="text-align:left;">
Open
</td>
<td style="text-align:left;">
96.22
</td>
</tr>
<tr>
<td style="text-align:left;">
Low
</td>
<td style="text-align:left;">
95.11
</td>
</tr>
<tr>
<td style="text-align:left;">
High
</td>
<td style="text-align:left;">
96.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Close
</td>
<td style="text-align:left;">
95.53
</td>
</tr>
<tr>
<td style="text-align:left;">
Adjusted
</td>
<td style="text-align:left;">
93.08
</td>
</tr>
<tr>
<td style="text-align:left;">
Volume
</td>
<td style="text-align:left;">
6991647
</td>
</tr>
</tbody>
</table>
<p>Die Werte “Open”, “Low”, “High” und “Close” zeigen Eröffnungs-, Tiefst-, Höchst- und Schlusskurs des Titels. Mit “Volume” werden die Anzahl gehandelter Titel am jeweiligen Tag angegeben. Unter “Adjusted” ist der um Dividendenausschüttungen korrigierte Schlusskurs aufgeführt.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>Die Werte in Tabelle <a href="daten-1.html#tab:quote-data-nestle">3.2</a> sind insofern speziell, als dass sie den letzten Tag vor dem Ex-Dividend Datum von Nestlé für 2019 betreffen. Das heisst, es sind die Kurse des letzten Tages, bevor die Aktie ohne die für das Jahr 2019 ausgeschüttete Dividende gahandelt wurde. Die Dividende betrug in jenem Jahr CHF 2.45 <span class="citation">(vgl. Nestle <a href="#ref-nestle" role="doc-biblioref">2020</a>)</span>. Diese Differenz widerspiegelt sich in den Daten als Differenz des Close- und Adjusted-Preises. Da alle Werte (auch Open, Low, High und Close) am Folgetag ohne den Anspruch auf diese Dividende gehandelt werden, fallen diese typischerweise tiefer aus. Um eine Vergleichbarkeit der Renditen über die Zeit zu gewährleisten ist daher eine Anpassung der Werte mit Hilfe des Adjustement-Faktors nötig. Dieser ergibt sich als Quotient von Adjusted und Close Preis und wird auf allen Einträgen angewendet.</p>
<p>Weiter erwähnenswert ist, dass Yahoo den Adjusted Kurs des jeweils aktuellsten Tages - ausser eben am Tag vor Ex-Dividend - mit auf aktuellen Kurs festlegt. Im Lauf der Zeit und mit neuen Ausschüttungen verändert sich damit auch die Historie der Adjusted Werte. Dies lässt sich zeigen, wenn der Beispieleintrag von Nestlé per 12. April 2019 nach der nächsten Dividendenausschüttung (27. April 2020) noch einmal abgerufen wird <span class="citation">(vgl. Nestle <a href="#ref-nestle" role="doc-biblioref">2020</a>)</span>. Während alle Preise ausser “Adjusted” identisch ausgewiesen sind, hat sich dieser neu auf 90.72 verändert <span class="citation">(vgl. Yahoo <a href="#ref-yahoo_finance" role="doc-biblioref">2020</a>)</span>. Mit der nächsten Dividenenausschüttung (voraussichtlich im April 2021) wird sich dieser Wert dann wieder ändern. Mit Hilfe der Adjustierung ist aber gewährleistet, dass die Werte vergleichbar bleiben.</p>
</div>
</div>
<div id="aufbereitung" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Aufbereitung</h2>
<div id="bereinigung" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Bereinigung</h3>
<p>Mit Yahoo Finance wird ein erfahrener und häufig verwendeter Datenanbieter gewählt. Der Blick auf einige Quantilskennzahlen der Rohdaten in Tabelle @ref(tab:summary_before_clean) zeigt aber, dass dennoch einige Datenprobleme ausgemacht werden können.</p>
<pre><code>##       Open              Low               High             Close        
##  Min.   :      0   Min.   :      0   Min.   :      0   Min.   :      0  
##  1st Qu.:     12   1st Qu.:     12   1st Qu.:     12   1st Qu.:     12  
##  Median :     36   Median :     35   Median :     36   Median :     36  
##  Mean   :   1564   Mean   :   1548   Mean   :   1589   Mean   :   1564  
##  3rd Qu.:    157   3rd Qu.:    155   3rd Qu.:    158   3rd Qu.:    157  
##  Max.   :3750000   Max.   :3600000   Max.   :9046660   Max.   :3656250  
##  NA&#39;s   :135267    NA&#39;s   :135267    NA&#39;s   :135267    NA&#39;s   :135267   
##     Adjusted         
##  Min.   :-1.181e+20  
##  1st Qu.: 7.000e+00  
##  Median : 2.600e+01  
##  Mean   : 7.285e+17  
##  3rd Qu.: 1.220e+02  
##  Max.   : 5.487e+22  
##  NA&#39;s   :135267</code></pre>
<p>Die Behebung dieser Mängel und die damit einhergehende Bereinigung erfolgt in verschiedenen Schritten. Allen gemeinsam ist, dass die Bereinigung keinen Ausschluss der Daten zur Folge hat, sondern betroffene Werte als “Nicht verfügbar, (NA)” klassifiziert werden. Diese Unterscheidung ist insbesondere bei rollierender Betrachtung eines Zeitfensters der Vergangenheit von Bedeutung.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Entfernen von fehlerhaften Adjustierungsdaten</strong><br />
Eine Eigenschaft von Aktienpreisen ist es, dass sie nicht negativ sein können. Der Datensatz weist aber vereinzelt negative Adjusted Werte aus. Dies lässt sich auch durch die Dividendenbereinigung nicht erklären. Bei diesen Einträgen scheinen daher Datenfehler vorzuliegen. Erschwerend kommt hinzu, dass sich Fehler bei der Adjustierung nicht auf den jeweiligen Eintrag beschränken müssen. Aufgrund der Funktionsweise der Adjustierung (vgl. <a href="daten-1.html#preisinformationen">3.1.2</a>) ist ein vererben des Fehlers auf andere Einträge des jeweiligen Titels wahrscheinlich. Bei genauerer Betrachtung der Adjusted Werte fällt ferne auf, dass auch einige sehr sehr kleine (im Bereich <span class="math inline">\(-10^{-6}\)</span>), wenn auch postive Werte gefunden werden können. Aus diesen Grund werden alle Ticker, welche in ihrer Historie einen Adjusted Preis von weniger als 0.001 aufweisen, ausgeschlossen.</p></li>
<li><p><strong>Entfernen von Einträgen mit unerwarterer Reihenfolge</strong><br />
Die Werte für Open, Low, High und Close implizieren eine klare Reihenfolge. Keine anderer der Werte darf höher als das High oder kleiner als das Low sein. Ist dies der Fall, werden die entsprechenden Werte von der Analyse ausgeschlossen.</p></li>
<li><p><strong>Erkennen und Ausschluss von Tippfehlern</strong><br />
Einzelne Einträge lassen sich als Tippfehler identifizieren. Der Titel “AV.L” weist per 09. August 2019 beispielsweise einen Low-Wert von 3.87 aus, währenddem alle andern Werte des gleichen Tages wie auch der benachbarten Tage bei ca. 380 liegen. Es liegt auf der Hand, dass dieser Wert um einen Faktor 100 falsch erfasst wurde. Solchen Fehlern wird begegnet, indem alle paarweisen Verhältnisse von Open, Low, High und Close Preis kleiner als 8 sein müssen. Andernfalls erfolgt ein Ausschluss der als Tippehler identifizierten Kennzahl.</p></li>
<li><p><strong>Fehlende Preisbewegungen innerhalb des Tages</strong><br />
Der Aktienkurs eines grösseren Unternehens bewegt sich typischerweise auch an ruhigen Börsentagen immer ein wenig. Die vorhandenen Preise liegen mit der Genauigkeit mehrer Nachkommastellen vor. Unterscheiden sich hierbei Tagestiefst- und Tageshöchstpreis nicht, muss von einem Datenfehler ausgegangen werden. Einträge ohne Preisbewegung innerhalb des Tages werden daher von der Analyse ausgeschlossen.</p></li>
<li><p><strong>Fehlende Kursbewegungen über nacheinanderfolgende Börsentage</strong><br />
Ähnlich wie bei den Preisbewegungen innerhalb des Tages verhält es sich auch bei Bewegungen über sich folgende Börsentage hinweg. Es ist zu erwarten, dass sich mindestens einer der fünf betrachteten Preise vom Vortag unterscheidet. Ist dies nicht der Fall, wird der Eintrag ausgeschlossen.</p></li>
<li><p><strong>Aussergewöhnlich hohe Preisbewegungen</strong><br />
Es liegt in der Natur der Sache, dass sich Aktienkurse verändern. Grosse Kurssprünge sind bei Aktien sehr grosser Unternehmen wie sie in dieser Arbeit betrachtet werden aber selten. Die Chance, dass das Verhältnis zwischen adjustiertem Preis des Vortages und adjustiertem Preis des aktuellen Tages (und vice versa) um mehr als einen Faktor 2 unterscheidet erachten wir als kleiner, als dass es sich dabei um einen Datenfehler handelt. Entsprechende Einträge werden deshalb entfernt.</p></li>
<li><p><strong>Ausschluss von Extremwerten</strong><br />
Die der vorliegenden Analyse zugrundliegende Payoff-Funktion ist abhängig von den Preisbewegungen einer Aktie innerhalb des Tages (vgl. <a href="intro.html#forschungsfrage">2.2</a>). Speziell dabei ist, dass die Höhe der Bewegung nicht nur linear, sondern gar quadratisch Niederschlag findet. Dies führt dazu, dass die Analyse sehr sensitiv auf einzelne extreme Ausreisser reagiert. Hinzu kommt, dass es Ziel der Arbeit ist, Aussagen über Kursbewegungen innerhalb eines typischen Börsentages machen zu können. Eine Prognose von Werten an aussergewöhnlichen Tagen liegt ausserhalb des Geltungsbereiches der Analyse. Aus diesem Grund werden nach obigen Breinigungen für jede der fünf Preiskennzahlen die jeweils 1% extremsten Werte nach oben wie auch unten ausgeschlossen. Der Ausschluss erfolgt aufgrund der unterschiedlichen Preislevels der Aktien auf einer täglich auf den Eröffnungspreis indexierten Wert.</p></li>
</ol>
<p>Zusammenfassend lässt sich festhalten, dass der rohe Datensatz aus 9212052 Einträgen besteht. Davon weisen 135267 Zeilen vor Bereinigung einen fehlenden Wert auf. Nach Bereinigung erhöht sich dieser Wert auf 1579718. Für die Analyse bleiben somit 7632334 verwendbare Einträge.</p>
</div>
<div id="normalisierung" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Normalisierung</h3>
<p>Ein weiteres Problem, das sich beim Vergleich von Preisen verschiedener Aktien ergibt, ist deren unterschiedlichesw Preisniveau. Während eine Aktie bei USD 30 handelt, bewegt sich eine andere auf einem Niveau von USD 1000. Eine Vergleichbarkeit lässt sich dadurch herstellen, indem nicht absolue Preise, sondern relative Returns in der Analyse verwendet werden. Tatsächlich ist dies in der Payoff-Funktion (vgl. Gleichung <a href="#eq:payoff">(<strong>??</strong>)</a>) bereits grösstenteils sichergestellt. Das absolute Preisniveau fliesst allerdings auch in die Berechnung des Gamma Cash (vgl. Gleichung @ref(eq:gamma_cash)) mit ein. Um auch hier eine Vergleichbarkeit der Werte sicherzustellen, wird bei allen nachfolgenden Analysen der Preis auf ein Niveau von 100 per adjustiertem Vortagesendkurs (dies entspricht dem letzten Neutralisierungszeitpunkt des Deltas) standardisiert.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="daten-1.html#cb2-1"></a><span class="cf">if</span> (<span class="op">!</span><span class="kw">file.exists</span>(<span class="st">&quot;data/data_wide_0_all.feather&quot;</span>)) {</span>
<span id="cb2-2"><a href="daten-1.html#cb2-2"></a>  window &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb2-3"><a href="daten-1.html#cb2-3"></a>  data_wide_<span class="dv">0</span>_all &lt;-<span class="st"> </span>quotes_clean <span class="op">%&gt;%</span></span>
<span id="cb2-4"><a href="daten-1.html#cb2-4"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(Ticker) <span class="op">%&gt;%</span></span>
<span id="cb2-5"><a href="daten-1.html#cb2-5"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">group_modify</span>(<span class="op">~</span><span class="kw">widen</span>(., <span class="dt">window =</span> window <span class="op">+</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;Close&quot;</span>), <span class="dt">keep =</span> <span class="kw">c</span>(<span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Close&quot;</span>, <span class="st">&quot;Open&quot;</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>))) <span class="op">%&gt;%</span></span>
<span id="cb2-6"><a href="daten-1.html#cb2-6"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb2-7"><a href="daten-1.html#cb2-7"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">Close_0 =</span> <span class="st">&quot;Close&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-8"><a href="daten-1.html#cb2-8"></a><span class="st">    </span><span class="kw">normalize_quotes</span>(<span class="st">&quot;Close_1&quot;</span>, <span class="kw">setdiff</span>(<span class="kw">names</span>(.), <span class="kw">c</span>(<span class="st">&quot;Ticker&quot;</span>, <span class="st">&quot;Date&quot;</span>)))</span>
<span id="cb2-9"><a href="daten-1.html#cb2-9"></a>  </span>
<span id="cb2-10"><a href="daten-1.html#cb2-10"></a>  data_wide_<span class="dv">0</span>_all &lt;-<span class="st"> </span><span class="kw">drop_na</span>(data_wide_<span class="dv">0</span>_all)</span>
<span id="cb2-11"><a href="daten-1.html#cb2-11"></a>  arrow<span class="op">::</span><span class="kw">write_feather</span>(data_wide_<span class="dv">0</span>_all, <span class="st">&quot;data/data_wide_0_all.feather&quot;</span>)</span>
<span id="cb2-12"><a href="daten-1.html#cb2-12"></a>  data_wide_<span class="dv">0</span>_all &lt;-<span class="st"> </span><span class="kw">read_feather</span>(<span class="st">&quot;data/data_wide_0_all.feather&quot;</span>)</span>
<span id="cb2-13"><a href="daten-1.html#cb2-13"></a>  <span class="co"># data_wide_0_all_hash &lt;- digest(data_wide_0_all)</span></span>
<span id="cb2-14"><a href="daten-1.html#cb2-14"></a>} <span class="cf">else</span> {</span>
<span id="cb2-15"><a href="daten-1.html#cb2-15"></a>  data_wide_<span class="dv">0</span>_all &lt;-<span class="st"> </span><span class="kw">read_feather</span>(<span class="st">&quot;data/data_wide_0_all.feather&quot;</span>)</span>
<span id="cb2-16"><a href="daten-1.html#cb2-16"></a>}</span>
<span id="cb2-17"><a href="daten-1.html#cb2-17"></a></span>
<span id="cb2-18"><a href="daten-1.html#cb2-18"></a><span class="kw">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb2-19"><a href="daten-1.html#cb2-19"></a>both_first &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;buy&quot;</span>, <span class="st">&quot;sell&quot;</span>)[<span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="kw">nrow</span>(data_wide_<span class="dv">0</span>_all), <span class="dt">replace =</span> <span class="ot">TRUE</span>)]</span>
<span id="cb2-20"><a href="daten-1.html#cb2-20"></a>payoff &lt;-<span class="st"> </span><span class="kw">calc_payoff_const_gamma</span>(data_wide_<span class="dv">0</span>_all, <span class="dt">both_first =</span> both_first)</span>
<span id="cb2-21"><a href="daten-1.html#cb2-21"></a></span>
<span id="cb2-22"><a href="daten-1.html#cb2-22"></a>n_steps &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb2-23"><a href="daten-1.html#cb2-23"></a>payoff_sorted &lt;-<span class="st"> </span><span class="kw">sort</span>(payoff)</span>
<span id="cb2-24"><a href="daten-1.html#cb2-24"></a>x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">length.out =</span> n_steps)</span>
<span id="cb2-25"><a href="daten-1.html#cb2-25"></a>y &lt;-<span class="st"> </span><span class="kw">quantile</span>(<span class="kw">cumsum</span>(payoff_sorted), <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">length.out =</span> n_steps)) <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(payoff_sorted)</span>
<span id="cb2-26"><a href="daten-1.html#cb2-26"></a></span>
<span id="cb2-27"><a href="daten-1.html#cb2-27"></a><span class="kw">ggplot</span>(<span class="kw">tibble</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y), <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-28"><a href="daten-1.html#cb2-28"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb2-29"><a href="daten-1.html#cb2-29"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>percent) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-30"><a href="daten-1.html#cb2-30"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>percent) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-31"><a href="daten-1.html#cb2-31"></a><span class="st">  </span><span class="kw">geom_abline</span>(<span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="op">+</span></span>
<span id="cb2-32"><a href="daten-1.html#cb2-32"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Lorenzkurve der Payoffs&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-33"><a href="daten-1.html#cb2-33"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Kumulativer Anteil der Datenpunkte&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-34"><a href="daten-1.html#cb2-34"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Kumulativer Anteil des Payoffs&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-35"><a href="daten-1.html#cb2-35"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-2"></span>
<img src="Masterarbeit_files/figure-html/unnamed-chunk-2-1.png" alt="Lorenzkurve des Payoffs" width="672" />
<p class="caption">
Abbildung 3.2: Lorenzkurve des Payoffs
</p>
</div>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-blackrock">
<p>Blackrock. 2020. “<em>IShares Msci World Ucits Etf: IWRD</em>.”</p>
</div>
<div id="ref-nestle">
<p>Nestle. 2020. “<em>Dividendenzahlungen</em>.”</p>
</div>
<div id="ref-yahoo_finance">
<p>Yahoo. 2020. “<em>Yahoo Finance</em>.”</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Das Startdatum dieser Arbeit.<a href="daten-1.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Allfällige Aktiensplits sind in allen Werten bereits berücksichtigt.<a href="daten-1.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analyse.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
